/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-21 21:49:21.025339
Start Time: 2025-10-21 21:49:21.058230
Get Portfolio Equity and Cash Time: 2025-10-21 21:49:21.216665
Get Current Positions Time: 2025-10-21 21:49:21.464488
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
Target Volatility Position Sizing Time: 2025-10-21 21:49:26.673673
[email] summary: True (sent)
success: 2025-10-22 complete
exit: gate skip at 2025-10-22T23:00:09.481640+00:00Z
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-22 20:00:16.339246
Start Time: 2025-10-22 20:00:16.355924
Get Portfolio Equity and Cash Time: 2025-10-22 20:00:16.517987
Get Current Positions Time: 2025-10-22 20:00:16.788711
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
[fatal] datetime.date(2025, 10, 23)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: datetime.date(2025, 10, 23)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 1132, in <module>
    main()
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 999, in main
    df, desired_positions, current_positions = get_desired_trades_by_ticker(cfg, date=today)
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 661, in get_desired_trades_by_ticker
    df.loc[date, f'{ticker}_stop_loss'] = _long_stop_for_today(date, ticker, highest_high_window,
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 411, in _long_stop_for_today
    return float(chandelier_stop_long(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 241, in chandelier_stop_long
    atr = df_atr.loc[date, f'{ticker}_{rolling_atr_window}_avg_true_range_price']
          ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexing.py", line 1183, in __getitem__
    return self.obj._get_value(*key, takeable=self._takeable)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/frame.py", line 4221, in _get_value
    row = self.index.get_loc(index)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: datetime.date(2025, 10, 23)
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-22 21:16:33.415959
Start Time: 2025-10-22 21:16:33.426113
Get Portfolio Equity and Cash Time: 2025-10-22 21:16:33.597288
Get Current Positions Time: 2025-10-22 21:16:33.837075
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
Target Volatility Position Sizing Time: 2025-10-22 21:16:39.172180
[email] summary: True (sent)
success: 2025-10-23 complete
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-22 22:16:58.287231
Start Time: 2025-10-22 22:16:58.297148
Get Portfolio Equity and Cash Time: 2025-10-22 22:16:58.456771
Get Current Positions Time: 2025-10-22 22:16:58.734142
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
[fatal] Cannot compare Timestamp with datetime.date. Use ts == pd.Timestamp(date) or ts.date() == date instead.
Traceback (most recent call last):
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: Timestamp('2025-10-23 00:00:00+0000', tz='UTC')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 6798, in get_slice_bound
    slc = self.get_loc(label)
          ^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: Timestamp('2025-10-23 00:00:00+0000', tz='UTC')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 1149, in <module>
    main()
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 1016, in main
    df, desired_positions, current_positions = get_desired_trades_by_ticker(cfg, date=today)
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 678, in get_desired_trades_by_ticker
    df.loc[date, f'{ticker}_stop_loss'] = _long_stop_for_today(date, ticker, highest_high_window,
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 428, in _long_stop_for_today
    return float(chandelier_stop_long(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 252, in chandelier_stop_long
    atr_series = df_atr[atr_col].loc[:key]
                 ~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexing.py", line 1411, in _getitem_axis
    return self._get_slice_axis(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexing.py", line 1443, in _get_slice_axis
    indexer = labels.slice_indexer(slice_obj.start, slice_obj.stop, slice_obj.step)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 6662, in slice_indexer
    start_slice, end_slice = self.slice_locs(start, end, step=step)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 6885, in slice_locs
    end_slice = self.get_slice_bound(end, "right")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 6801, in get_slice_bound
    return self._searchsorted_monotonic(label, side)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/indexes/base.py", line 6733, in _searchsorted_monotonic
    return self.searchsorted(label, side=side)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/base.py", line 1352, in searchsorted
    return algorithms.searchsorted(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/crypto_prod/lib/python3.12/site-packages/pandas/core/algorithms.py", line 1329, in searchsorted
    return arr.searchsorted(value, side=side, sorter=sorter)  # type: ignore[arg-type]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "timestamps.pyx", line 377, in pandas._libs.tslibs.timestamps._Timestamp.__richcmp__
TypeError: Cannot compare Timestamp with datetime.date. Use ts == pd.Timestamp(date) or ts.date() == date instead.
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-22 22:21:51.068638
Start Time: 2025-10-22 22:21:51.077305
Get Portfolio Equity and Cash Time: 2025-10-22 22:21:51.230188
Get Current Positions Time: 2025-10-22 22:21:51.498959
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
[fatal] 'float' object has no attribute 'loc'
Traceback (most recent call last):
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 1159, in <module>
    main()
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 1026, in main
    df, desired_positions, current_positions = get_desired_trades_by_ticker(cfg, date=today)
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 688, in get_desired_trades_by_ticker
    df.loc[date, f'{ticker}_stop_loss'] = _long_stop_for_today(date, ticker, highest_high_window,
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 438, in _long_stop_for_today
    return float(chandelier_stop_long(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/trend_following_v0.1.0-live.py", line 273, in chandelier_stop_long
    chandelier_stop = chandelier_stop.loc[date]
                      ^^^^^^^^^^^^^^^^^^^
AttributeError: 'float' object has no attribute 'loc'
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-22 22:23:25.347651
Start Time: 2025-10-22 22:23:25.356113
Get Portfolio Equity and Cash Time: 2025-10-22 22:23:25.513676
Get Current Positions Time: 2025-10-22 22:23:25.762116
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
Target Volatility Position Sizing Time: 2025-10-22 22:23:32.330753
[email] summary: True (sent)
success: 2025-10-23 complete
exit: gate skip at 2025-10-23T23:00:10.001358+00:00Z
/Users/adheerchauhan/Documents/git/trend_following/live_strategy/trend_following_strategy_v0.1.0-live/config/trend_strategy_config_v0.1.0.yaml
True
Generating Volatility Adjusted Trend Signal!!
Covariance Matrix Time: 2025-10-23 20:00:18.044305
Start Time: 2025-10-23 20:00:18.060868
Get Portfolio Equity and Cash Time: 2025-10-23 20:00:18.222648
Get Current Positions Time: 2025-10-23 20:00:18.487329
[]
[]
[(datetime.datetime(2025, 10, 14, 4, 39, 19, 349976, tzinfo=datetime.timezone.utc), 203.12)]
[]
[]
Target Volatility Position Sizing Time: 2025-10-23 20:00:24.251029
[email] summary: True (sent)
success: 2025-10-24 complete
